
## 七、文件操作

### 7.1 文件操作基本流程

1. 打开文件
2. 读写文件
3. 关闭文件

### 7.2 通过open函数操作文件

1. 打开文件
   - `open(file, mode, encoding)` 函数，返回文件对象，用于打开文件或创建文件
   - file参数 文件路径字符串
   - mode参数 文件访问模式
   - encoding参数 编码方式，推荐使用utf-8

    mode参数的可选值

    - 'r' 只读模式（默认）
    - 'w' 覆写模式，覆盖文件原有内容，写入新内容。文件不存在时，自动创建文件
    - 'a' 追加模式，在原文件末尾写入内容。文件不存在时，自动创建文件
    - 'rb' 使用只读模式打开二进制文件（图片等）
    - 'wb' 使用覆写模式写入二进制文件
    - `+` 配合以上方法使用，在原有功能上增加同时读写功能

2. 读写文件

   - `read()`方法 读取文件内容，默认读取全部内容。传入数字可指定读取的字节长度
   - `readlines()`方法 按行读取，返回列表，如果返回的列表需要遍历，则直接遍历文件对象也可以实现这个功能，并且更高效
   - `readline()`方法 一次读取一行，此方法和 for i in open()相同，一次读取一行内容，大多数行末尾会有一个换行符
   - `write()`方法 将内容写入文件
   - `flush()`方法 刷新内容，使write()函数的内容成功写入文件
   - `write()`函数将文件内容写到缓冲区，返回写入的字符数，需要使用flush()方法或者close()方法才可以完全写入文件
   - `writelines()`方法 传入字符串列表，将此列表写入文件
   - `seek()`方法 传入数字，改变当前文件操作指针的位置，英语占一个字节，GBK编码中文占2个字节，UTF-8编码中文占3个字节

3. 关闭文件 `close()`方法

快捷操作 `with open() as f` 使用with open语句对文件操作结束后，会自动关闭文件

### 7.3 通过pathlib操作文件
    
1. 导入标准库 `pathlib`

        from pathlib import Path

2. 创建 `Path` 对象

        path = Path() # 传入文件路径

3. 对 `Path` 对象进行操作

    `Path` 对象的常用方法：

    - `read_text()` 方法 读取path对象路径文件的所有内容，可选参数encoding指定读取文件使用的编码，常用utf-8
    - `write_text()` 方法 将字符串写入文件，如果指定路径的文件不存在，则会创建它，使用此方法写入时会删除文件原有内容
    - `exists()` 方法 判断文件是否存在
    - path对象可以通过str()函数转换为路径字符串


常和字符串的 `splitlines()` 方法一起使用，按行分割字符串，返回列表

## 八、异常

Python 使用称为异常（exception）的特殊对象来管理程序执行期间发生的错误。

`try except else finally`语句

- `try` 语句 可能引发异常的代码
- `except` 语句 出现异常时，不出现traceback终止程序
    - 捕获一种异常 `except NameError as e:`
    - 捕获多种异常 `except (NameError, ZeroDivisionError):`
    - 捕获所有异常 `except Exception as e:`
- `else` 语句（可选） 不出现异常继续执行的代码
- `finally` 语句（可选） 无论是否异常都要执行的代码