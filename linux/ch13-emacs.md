# Emacs 编辑器

13.2 Emacs 的操作
ubantu
sudo apt-get install emacs
13.2.2 Emacs 的启动
启动：emacs 或 emacs 加上文件名
界面：标题栏、菜单栏、窗口区域、模式行、回显行。
模式行：启动界面倒数第二行。模式行显示状态信息。包括以下几个字段：
-:--- buf pos L#（Pattern）
1）冒号后面的 3 个字符中前 2 个字符表示缓冲区中文本的状态。
--：表示缓冲区未被编辑。
**： 表示缓冲区文本已经被修改。
%%： 表示只读缓冲区中文本未被修改。
%*： 表示只读缓冲区中文本已经被修改。
2）buf 显示窗口缓冲的名字，一般为文件名。
3）pos 可指示以下选项：All 表示显示了整个文件；Top 表示显示了文件的开始部分；Bot
表示显示了文件的末尾部分；NN%表示在窗口顶部以上的部分显示缓冲区文件的百分比。
4）L#表示字母 L 后跟当前光标所在行的行号。
5）（Pattern）表示缓冲区中有效的模式。可用主模式包括 Fundamental 模式、Text 模式、
Lisp 模式、C 模式和其他模式。
13.2.3 Emacs 的退出
先按 Ctrl+X 组合键，再按 Ctrl+S 键 ： 保存文件并退出 Emacs
先按 Ctrl+X 组合键，再按 Ctrl+C 键 ： 不保存文件退出 Emacs
先按 Ctrl+X 组合键，再按 Ctrl+W 键 ： 另存为文件
13.2.4 文件与缓冲区操作
先按 Ctrl+X 组合键，再按 Ctrl+F 键 ： 搜索并打开文件
先按 Ctrl+X 组合键，再按 Ctrl+V 键 ： 打开另一个文件以替换当前打开的文件
先按 Ctrl+X 组合键，再按 Ctrl+I 键 ： 在光标所在处插入文件
按组合键 Alt+X ： 恢复自动保存的文件
先按 Ctrl+X 组合键，再按 Ctrl+B 键 ： 切换缓冲区
先按 Ctrl+X 组合键，再按 Ctrl+S 键 ： 保存缓冲区
按 Ctrl+G 组合键 ： 撤销命令
13.2.5 Emacs 的基本操作
1. 光标的移动
Ctrl+F 将光标向前移动一个字符
Ctrl+B 将光标向后移动一个字符
Ctrl+P 将光标移动到上一行
Ctrl+N 将光标移动到下一行
Ctrl+A 将光标移到当前行的行首
Ctrl+E 将光标移到当前行的行尾
Ctrl+V 将光标向前移动一屏
Alt+V 将光标向后移动一屏
Alt+F 将光标向前移动一个单词
Alt+B 将光标向后移动一个单词
Alt+< 将光标移到文本开头
Alt+> 将光标移到文本末尾
2. 删除
Backspace 删除光标前的一个字符
Ctrl+D 删除光标处的字符
Ctrl+X，再按 U 撤销上次修改
Alt+D 删除光标后的一个单词
Ctrl+K 删除从光标到该行行尾的所有字符
Ctrl+X，再按 Backspace 删除前一句
Ctrl+W 删除两个位置间的所有文本
3. 重排
Ctrl+空格键 在当前点位置设置标记
Ctrl+X，Ctrl+X 互换光标点和标记的位置，该命令可以用来显示标记的位置
如，对于 example.txt 文件，将光标移动到第 2 行首字母 T 上。Ctrl+空格键，在屏幕底部的
回显行会显示信息“Mark set”。将光标移至文件末尾设置点，按组合键 Ctrl+X，Ctrl+X，互
换光标点和标记，显示出标记的位置，确保设置了标记。
按 Ctrl+W，删除选中的文本。被删除的文本放置在缓冲区内，可以重新插入文本的其他位
置。
将光标放于第 2 行，按 Ctrl+Y 组合键，在光标位置插入被删除的文本
4. 搜索和替换
Ctrl+S 向前递增搜索
Ctrl+R 向后递增搜索
替换命令需要提供两个参数：搜索字符串和替换字符串。每一个参数都以 Enter 键结束。
命令按键为：先按 Alt+Shift+5 组合键，然后输入要搜索的字符串，再按 Enter 键，Emacs
会提示输入要替换的字符串，输完按 Enter。
空格键或 Y 替换当前匹配并进入下一匹配处
Delete 键或 N 忽略此次匹配并进入到下一匹配处
，（逗号）键 显示替换结果
Enter 键或 Q 直接退出
.（句号）键 替换当前匹配并退出
！键 直接替换剩下的所有匹配
^键 回到前一匹配处
5. 大小写字母转换
将光标放在单词前
Alt+U 将整个单词转为大写
Alt+L 将整个单词转为小写
Alt+C 将首字母改为大写
Ctrl+X，Ctrl+U 将指定区域改为大写
Ctrl+X，Ctrl+L 将指定区域改为小写
6. 帮助操作
Ctrl+H 调用 Emacs 的帮助
7. 窗口操作
Ctrl+X，再按 2 将当前窗口水平分割为两个窗口
Ctrl+X，再按 3 将当前窗口垂直分割为两个窗口
Ctrl+X，再按> 向右滚动当前窗口
Ctrl+X，再按< 向左滚动当前窗口
Ctrl+X，再按 0 删除当前窗口
Ctrl+X，再按 O 将光标放在其他窗口上
Ctrl+X，再按 1 删除当前窗口外的所有窗口
13.2.6 Emacs 环境下编译并运行 C/C++程序
启动 Emacs，输入 “emacs -nw” 命令
先按 Ctrl+X，再 Ctrl+F，打开文件 test.c
Ctrl+X，Ctrl+S，保存文件
编译文件，Alt+X，输入“eshell”命令进入缓冲区
输入“gcc test.c -o test” 命令以编译源文件，并通过“./test”命令运行程序
1）下列不属于光标移动命令的组合是
A. Ctrl+F B. Ctrl+A C. Alt+D D. Alt+B
2）重排是对文本中的内容进行操作，选中的一段文字表示区域，区域的起点叫做 标记，
光标移动到的位置和标记之间就是区域，光标在文本中的位置叫做 光标点。
3）若回显行显示“Find file:/tmp/”，说明用户执行了搜索并打开文件的命令：先按 Ctrl+X 组
合键，再按 Ctrl+F 组合键
4）用户如果想查看在 Emacs 中保存的文件，可通过 Enter 键 命令查看文件列表。