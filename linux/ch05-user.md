# 用户管理

5.1 用户与用户组管理
1. 用户名和 ID 的对应关系存储在/etc/passwd 文件中。
2. 在默认情况下，管理员创建一个用户，就会在 /home 目录下创建一个用户主目录。
3. 存放用户密码信息的目录是 /etc
5.2 用户和用户组管理相关的文件
1. 用户基本信息：/etc/passwd 文件的权限是 _rw-r--r--_ ,用户密码信息：/etc/shadow 文
件的权限是 rw-------_ 。
5.3 用户和用户组管理的命令
5.3.1 用户的添加
[root@localhost ~]# useradd [ 选项 ] 用户名
从创建的过程，系统读取 /etc/login.defs 和 /etc/default/useradd，根据这两个配置文件中
定义的规则添加用户，在/etc/passwd、/etc/shadow、/etc/group、/etc/gshadow 文件中添
加用户数据；然后系统会自动在/etc/default/useradd 文件设定的目录下建立用户主目录；
最后复制/etc/skel 目录中的所有文件到此主目录中。由此，一个新的用户创建完成了。
/etc/passwd 系统用户配置文件，存储了系统中所有用户的基本信息，所有用户都可对此文
件执行读操作。
文件中每行用户信息划分为 7 个字段
用户名：密码：UID：GID：描述性信息：主目录：默认 shell
用户名字符串，密码 x 表示设有密码，真正密码保存在/etc/shadow；
UID 取值范围 0-65535，某些情况下允许用户存在多个拥有不同用户名但 UID 相同的用户；
GID 初始组只能一个，附加组可以多个。UID 在 1-499 供系统程序使用的用户，普通用户
UID 从 500 开始。
主目录，用户登录后有操作权限的访问目录，root 超级管理员账户的主目录为/root，普通
用户主目录为/home/UID，即在/home 下建立和用户名相同的目录作为主目录。
默认 shell：/bin/bash
5.3.2 密码配置命令
passwd [选项] 用户名
普通用户只能使用 passwd 命令修改 ___ 自己的 ___ 密码，而不能修改 ___ 其他用户的 __ 的密码。超级用户 root 既可以使用 passwd 命令修改 __ 自己的 __ 密码，也可以修改 __ 其
他用户的 __ 的密码
5.3.3 修改用户信息命令
[root@localhost ~]# usermod [ 选项 ] 用户名
-L 临时锁定用户 Lock -U 解锁用户 Unlock
5.3.4 修改用户密码状态命令
[root@localhost ~]# change [ 选项 ] 用户名
5.3.5 删除用户命令
[root@localhost ~]# userdel -r 用户名，只用 root 用户才能用
-r 表示在删除用户的同时删除用户的家目录。
用户个人文件：主目录默认位于 /home/用户名；邮箱位于 /var/spool/mail/用户名。
5.3.7 用户间切换命令
[root@localhost ~]# su [ 选项 ] 用户名
-：当前用户不仅切换为指定用户的身份同时所用的工作环境也切换（包括 PATH 变量、
MAIL 变量等），使用-选项可省略用户名，默认切换为 root 用户。环境变量是用来定义操
作系统环境的，因此若系统环境没有随用户身份切换，很多命令无法正确执行。
没有-的话，则是临时切换。
使用 su 命令时,有-和没有-是完全不同的，- 选项表示 _ 在切换用户身份的同时，将当前
使用的环境变量也切换成指定用户的
5.3.8 用户组管理命令
添加用户组
[root@localhost ~]# groupadd [ 选项 ] 组名
修改用户组相关信息
[root@localhost ~]# groupmod [ 选项 ] 组名
删除用户组（群组）
[root@localhost ~]# groupdel 组名，仅适用于删除那些不是任何用户初始组的组
为了避免系统管理员 root 太忙，无法及时管理组，可以给组设置组管理员，代替 root 完成
将用户加入或移出组的操作。
[root@localhost ~]# gpasswd [ 选项 ] 组名
选项为空时，表示给组设置密码，仅 root 用户可用
-a user : 将 user 用户加入组
-d user: 将 user 用户从组移除
